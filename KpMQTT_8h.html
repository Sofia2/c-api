<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>SSAP API, C Implementation: ssap/KpMQTT.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen.override.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_sofia2.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">SSAP API, C Implementation
   &#160;<span id="projectnumber">4.2</span>
   </div>
   <div id="projectbrief">C implementation of the Sofia2 SSAP API</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('KpMQTT_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">KpMQTT.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Functions that handle MQTT connections to the SIB.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;../paho-mqtt-c/MQTTClient.h&quot;</code><br />
<code>#include &quot;<a class="el" href="SsapMessageGenerator_8h.html">SsapMessageGenerator.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="MqttConnection_8h.html">MqttConnection.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for KpMQTT.h:</div>
<div class="dyncontent">
<div class="center"><img src="KpMQTT_8h__incl.png" border="0" usemap="#ssap_2KpMQTT_8h" alt=""/></div>
<map name="ssap_2KpMQTT_8h" id="ssap_2KpMQTT_8h">
<area shape="rect" id="node4" href="SsapMessageGenerator_8h.html" title="Functions that manipulate SSAP messages. " alt="" coords="445,184,619,211"/><area shape="rect" id="node6" href="MqttConnection_8h.html" title="Utility functions to build MQTT connection objects. " alt="" coords="369,95,495,121"/></map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmqtt__connection__result.html">mqtt_connection_result</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This structure stores the result of a MQTT connection operation.  <a href="structmqtt__connection__result.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aa6ff17a9f8517d62d635de23e8be85bb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="KpMQTT_8h.html#aa6ff17a9f8517d62d635de23e8be85bb">KPMQTTDLL_API</a></td></tr>
<tr class="separator:aa6ff17a9f8517d62d635de23e8be85bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a661aff4ae1eb92e6352acb0173177fc5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="KpMQTT_8h.html#a661aff4ae1eb92e6352acb0173177fc5">WATCHDOG_TOPIC</a>&#160;&#160;&#160;&quot;MQTT_CONN_WATCHDOG&quot;</td></tr>
<tr class="memdesc:a661aff4ae1eb92e6352acb0173177fc5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Topic to be used by the MQTT connection watchdog.  <a href="#a661aff4ae1eb92e6352acb0173177fc5">More...</a><br /></td></tr>
<tr class="separator:a661aff4ae1eb92e6352acb0173177fc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fa4daba3d8a65cb1b1869144a59635a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="KpMQTT_8h.html#a2fa4daba3d8a65cb1b1869144a59635a">WATCHDOG_SEND_TIMEOUT</a>&#160;&#160;&#160;5000</td></tr>
<tr class="separator:a2fa4daba3d8a65cb1b1869144a59635a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a360d0ab6a231f8b150370efae788a24a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="KpMQTT_8h.html#a360d0ab6a231f8b150370efae788a24a">SIB_GW_TOPIC</a>&#160;&#160;&#160;&quot;CLIENT_TOPIC&quot;</td></tr>
<tr class="memdesc:a360d0ab6a231f8b150370efae788a24a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Topic to use when sending data to the SIB.  <a href="#a360d0ab6a231f8b150370efae788a24a">More...</a><br /></td></tr>
<tr class="separator:a360d0ab6a231f8b150370efae788a24a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74ec19f421cd68625daaacc05f43ba63"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="KpMQTT_8h.html#a74ec19f421cd68625daaacc05f43ba63">SSAP_RESPONSES_TOPIC</a>&#160;&#160;&#160;&quot;/TOPIC_MQTT_PUBLISH&quot;</td></tr>
<tr class="memdesc:a74ec19f421cd68625daaacc05f43ba63"><td class="mdescLeft">&#160;</td><td class="mdescRight">The topic that the SIB uses to answer us.  <a href="#a74ec19f421cd68625daaacc05f43ba63">More...</a><br /></td></tr>
<tr class="separator:a74ec19f421cd68625daaacc05f43ba63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6965bcb0941f3814eb9d1d3981561c9d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="KpMQTT_8h.html#a6965bcb0941f3814eb9d1d3981561c9d">NOTIFICATIONS_TOPIC_LENGTH</a>&#160;&#160;&#160;19</td></tr>
<tr class="memdesc:a6965bcb0941f3814eb9d1d3981561c9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The length of the notifications topic.  <a href="#a6965bcb0941f3814eb9d1d3981561c9d">More...</a><br /></td></tr>
<tr class="separator:a6965bcb0941f3814eb9d1d3981561c9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09d5dc870b4b1aba97ffa91496d80240"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="KpMQTT_8h.html#a09d5dc870b4b1aba97ffa91496d80240">SSAP_INDICATIONS_TOPIC</a>&#160;&#160;&#160;&quot;/TOPIC_MQTT_INDICATION&quot;</td></tr>
<tr class="memdesc:a09d5dc870b4b1aba97ffa91496d80240"><td class="mdescLeft">&#160;</td><td class="mdescRight">The topic that the SIB uses to send subscription data.  <a href="#a09d5dc870b4b1aba97ffa91496d80240">More...</a><br /></td></tr>
<tr class="separator:a09d5dc870b4b1aba97ffa91496d80240"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae351369120d97e85678e034c811fdd7f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="KpMQTT_8h.html#ae351369120d97e85678e034c811fdd7f">SEND_TO_SIB_QOS_LEVEL</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:ae351369120d97e85678e034c811fdd7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ordinary SSAP QoS level.  <a href="#ae351369120d97e85678e034c811fdd7f">More...</a><br /></td></tr>
<tr class="separator:ae351369120d97e85678e034c811fdd7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98fc270f759b8c7fd7eb04b93d64f47a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="KpMQTT_8h.html#a98fc270f759b8c7fd7eb04b93d64f47a">SUSCRIBE_QOS_LEVEL</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:a98fc270f759b8c7fd7eb04b93d64f47a"><td class="mdescLeft">&#160;</td><td class="mdescRight">The subscription SSAP messages QoS level.  <a href="#a98fc270f759b8c7fd7eb04b93d64f47a">More...</a><br /></td></tr>
<tr class="separator:a98fc270f759b8c7fd7eb04b93d64f47a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a94c42ef79c93cb9672927fc1e1be6525"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="KpMQTT_8h.html#a94c42ef79c93cb9672927fc1e1be6525">ConnectionStatus</a> { <br />
&#160;&#160;<a class="el" href="KpMQTT_8h.html#a94c42ef79c93cb9672927fc1e1be6525a7a691a2430ec26878897b5fbc9c22a4c">CONNECTED</a>, 
<a class="el" href="KpMQTT_8h.html#a94c42ef79c93cb9672927fc1e1be6525ad686e08986d46bfaca37170fc0a2544d">FAILED_CallbacksNotRegistered</a>, 
<a class="el" href="KpMQTT_8h.html#a94c42ef79c93cb9672927fc1e1be6525a938799b0b8f0238d17df8ec16a405933">FAILED_PhysicalConnection</a>, 
<a class="el" href="KpMQTT_8h.html#a94c42ef79c93cb9672927fc1e1be6525a26e00e13227ad12020a966dd81969a79">FAILED_PhysicalConnection_BadCredentials</a>, 
<br />
&#160;&#160;<a class="el" href="KpMQTT_8h.html#a94c42ef79c93cb9672927fc1e1be6525ab045ea0666f8f02a9d9cca87445f2d61">FAILED_PhysicalConnection_BadClientID</a>, 
<a class="el" href="KpMQTT_8h.html#a94c42ef79c93cb9672927fc1e1be6525ad6d9d801a27bedf0cf2ddbb260935291">FAILED_SubscriptionToSIBTopic</a>, 
<a class="el" href="KpMQTT_8h.html#a94c42ef79c93cb9672927fc1e1be6525a1033df232780383892528b1461e091ea">FAILED_InternalError</a>
<br />
 }</td></tr>
<tr class="memdesc:a94c42ef79c93cb9672927fc1e1be6525"><td class="mdescLeft">&#160;</td><td class="mdescRight">An enum type that describes the outcome of a connection process.  <a href="KpMQTT_8h.html#a94c42ef79c93cb9672927fc1e1be6525">More...</a><br /></td></tr>
<tr class="separator:a94c42ef79c93cb9672927fc1e1be6525"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a433f6b787a3fe94980a96a34a1cb5a91"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="KpMQTT_8h.html#a433f6b787a3fe94980a96a34a1cb5a91">DisconnectionStatus</a> { <a class="el" href="KpMQTT_8h.html#a433f6b787a3fe94980a96a34a1cb5a91acdaad1112073e3e2ea032424c38c34e1">DISCONNECTED</a>, 
<a class="el" href="KpMQTT_8h.html#a433f6b787a3fe94980a96a34a1cb5a91a1f3eb805d8f8eb224538f9f7e847afa5">FAILED_ClosePhysicalConnection</a>, 
<a class="el" href="KpMQTT_8h.html#a433f6b787a3fe94980a96a34a1cb5a91a62ddedf7ef2f4e164931b628fa2deadb">FAILED_DisconnectionInternalError</a>
 }</td></tr>
<tr class="memdesc:a433f6b787a3fe94980a96a34a1cb5a91"><td class="mdescLeft">&#160;</td><td class="mdescRight">An enum type that describes the outcome of a disconnection process.  <a href="KpMQTT_8h.html#a433f6b787a3fe94980a96a34a1cb5a91">More...</a><br /></td></tr>
<tr class="separator:a433f6b787a3fe94980a96a34a1cb5a91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f96fdb6fe6979ec30d76ea5e290be15"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="KpMQTT_8h.html#a2f96fdb6fe6979ec30d76ea5e290be15">SendStatus</a> { <a class="el" href="KpMQTT_8h.html#a2f96fdb6fe6979ec30d76ea5e290be15af29619d9240b20155ab50bc3beb3947b">SENT</a>, 
<a class="el" href="KpMQTT_8h.html#a2f96fdb6fe6979ec30d76ea5e290be15a2c9c8a390fd84cedcbf0e5a559d17cef">FAILED_SendMessage</a>, 
<a class="el" href="KpMQTT_8h.html#a2f96fdb6fe6979ec30d76ea5e290be15af5b193b0202a842f0c454c4935d7cb26">FAILED_SIBReceptionConfirmation</a>
 }</td></tr>
<tr class="memdesc:a2f96fdb6fe6979ec30d76ea5e290be15"><td class="mdescLeft">&#160;</td><td class="mdescRight">An enum type that describes the outcome of a message delivery operation.  <a href="KpMQTT_8h.html#a2f96fdb6fe6979ec30d76ea5e290be15">More...</a><br /></td></tr>
<tr class="separator:a2f96fdb6fe6979ec30d76ea5e290be15"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abd2ed7d8b9dd349488c43dda0d29a598"><td class="memItemLeft" align="right" valign="top"><a class="el" href="KpMQTT_8h.html#aa6ff17a9f8517d62d635de23e8be85bb">KPMQTTDLL_API</a> <a class="el" href="KpMQTT_8h.html#a94c42ef79c93cb9672927fc1e1be6525">ConnectionStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="KpMQTT_8h.html#abd2ed7d8b9dd349488c43dda0d29a598">KpMqtt_connectd</a> (const char *server, const char *port, <a class="el" href="structmqtt__credentials.html">mqtt_credentials</a> *credentials, <a class="el" href="MqttConnection_8h.html#afcd4418156eb17b79888e3079cb86f11">genericSsapCallback</a> *messageReceivedCallback, void *callbackContext, void *<a class="el" href="MqttConnection_8h.html#a2ab9a04f5044a5d2ee2df041c359e03b">connectionEventsCallback</a>, void *connectionEventsContext, <a class="el" href="structmqtt__connection.html">mqtt_connection</a> **created_connection)</td></tr>
<tr class="memdesc:abd2ed7d8b9dd349488c43dda0d29a598"><td class="mdescLeft">&#160;</td><td class="mdescRight">Establishes a non-cyphered MQTT connection with the SIB.  <a href="#abd2ed7d8b9dd349488c43dda0d29a598">More...</a><br /></td></tr>
<tr class="separator:abd2ed7d8b9dd349488c43dda0d29a598"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18499fce3a35bbedcf2eaec7a156cbb5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="KpMQTT_8h.html#aa6ff17a9f8517d62d635de23e8be85bb">KPMQTTDLL_API</a> <a class="el" href="KpMQTT_8h.html#a94c42ef79c93cb9672927fc1e1be6525">ConnectionStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="KpMQTT_8h.html#a18499fce3a35bbedcf2eaec7a156cbb5">KpMqtt_connect</a> (<a class="el" href="structmqtt__connection.html">mqtt_connection</a> **connection, const char *server, const char *port)</td></tr>
<tr class="memdesc:a18499fce3a35bbedcf2eaec7a156cbb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Establishes a non-cyphered MQTT connection with the SIB.  <a href="#a18499fce3a35bbedcf2eaec7a156cbb5">More...</a><br /></td></tr>
<tr class="separator:a18499fce3a35bbedcf2eaec7a156cbb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fc08652368728e37dea7a59dc8f4d8b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="KpMQTT_8h.html#aa6ff17a9f8517d62d635de23e8be85bb">KPMQTTDLL_API</a> <a class="el" href="KpMQTT_8h.html#a94c42ef79c93cb9672927fc1e1be6525">ConnectionStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="KpMQTT_8h.html#a8fc08652368728e37dea7a59dc8f4d8b">KpMqtt_connectSSLd</a> (const char *server, const char *port, <a class="el" href="structmqtt__credentials.html">mqtt_credentials</a> *credentials, const char *ca_file, const char *ca_path, <a class="el" href="MqttConnection_8h.html#afcd4418156eb17b79888e3079cb86f11">genericSsapCallback</a> *messageReceivedCallback, void *callbackContext, void *<a class="el" href="MqttConnection_8h.html#a2ab9a04f5044a5d2ee2df041c359e03b">connectionEventsCallback</a>, void *connectionEventsContext, <a class="el" href="structmqtt__connection.html">mqtt_connection</a> **created_connection)</td></tr>
<tr class="memdesc:a8fc08652368728e37dea7a59dc8f4d8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Establishes a MQTT over SSL connection with the SIB.  <a href="#a8fc08652368728e37dea7a59dc8f4d8b">More...</a><br /></td></tr>
<tr class="separator:a8fc08652368728e37dea7a59dc8f4d8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79013f9a33ade5fd6c743293ca06169d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="KpMQTT_8h.html#aa6ff17a9f8517d62d635de23e8be85bb">KPMQTTDLL_API</a> <a class="el" href="KpMQTT_8h.html#a94c42ef79c93cb9672927fc1e1be6525">ConnectionStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="KpMQTT_8h.html#a79013f9a33ade5fd6c743293ca06169d">KpMqtt_connectSSL</a> (<a class="el" href="structmqtt__connection.html">mqtt_connection</a> **connection, const char *server, const char *port, const char *ca_file, const char *ca_path)</td></tr>
<tr class="memdesc:a79013f9a33ade5fd6c743293ca06169d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Establishes a MQTT over SSL connection with the SIB.  <a href="#a79013f9a33ade5fd6c743293ca06169d">More...</a><br /></td></tr>
<tr class="separator:a79013f9a33ade5fd6c743293ca06169d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1f21f13ce9c17d41d47f3ed3a57a5eb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="KpMQTT_8h.html#aa6ff17a9f8517d62d635de23e8be85bb">KPMQTTDLL_API</a> <a class="el" href="KpMQTT_8h.html#a433f6b787a3fe94980a96a34a1cb5a91">DisconnectionStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="KpMQTT_8h.html#ad1f21f13ce9c17d41d47f3ed3a57a5eb">KpMqtt_disconnect</a> (<a class="el" href="structmqtt__connection.html">mqtt_connection</a> *connection, int timeout)</td></tr>
<tr class="memdesc:ad1f21f13ce9c17d41d47f3ed3a57a5eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes an MQTT connection with the SIB.  <a href="#ad1f21f13ce9c17d41d47f3ed3a57a5eb">More...</a><br /></td></tr>
<tr class="separator:ad1f21f13ce9c17d41d47f3ed3a57a5eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5535969acf249144246152a88fc55e2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="KpMQTT_8h.html#aa6ff17a9f8517d62d635de23e8be85bb">KPMQTTDLL_API</a> <a class="el" href="KpMQTT_8h.html#a2f96fdb6fe6979ec30d76ea5e290be15">SendStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="KpMQTT_8h.html#af5535969acf249144246152a88fc55e2">KpMqtt_send</a> (<a class="el" href="structmqtt__connection.html">mqtt_connection</a> *connection, <a class="el" href="structssap__message.html">ssap_message</a> *request, int timeout)</td></tr>
<tr class="memdesc:af5535969acf249144246152a88fc55e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a SSAP message to the SIB.  <a href="#af5535969acf249144246152a88fc55e2">More...</a><br /></td></tr>
<tr class="separator:af5535969acf249144246152a88fc55e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a998718f3bde4ed2f6ba64c73c97e93ba"><td class="memItemLeft" align="right" valign="top"><a class="el" href="KpMQTT_8h.html#aa6ff17a9f8517d62d635de23e8be85bb">KPMQTTDLL_API</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="KpMQTT_8h.html#a998718f3bde4ed2f6ba64c73c97e93ba">KpMqtt_setIndicationListener</a> (<a class="el" href="structmqtt__connection.html">mqtt_connection</a> *connection, <a class="el" href="MqttConnection_8h.html#a68a4225be34219345b7726c1b99f9355">ssapIndicationCallback</a> *callback, void *callbackContext)</td></tr>
<tr class="memdesc:a998718f3bde4ed2f6ba64c73c97e93ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers the indication listener on a MQTT connection.  <a href="#a998718f3bde4ed2f6ba64c73c97e93ba">More...</a><br /></td></tr>
<tr class="separator:a998718f3bde4ed2f6ba64c73c97e93ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17ce378f6dc282c2cad711896a6ce791"><td class="memItemLeft" align="right" valign="top"><a class="el" href="KpMQTT_8h.html#aa6ff17a9f8517d62d635de23e8be85bb">KPMQTTDLL_API</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="KpMQTT_8h.html#a17ce378f6dc282c2cad711896a6ce791">setIndicationListener</a> (<a class="el" href="structmqtt__connection.html">mqtt_connection</a> *connection, <a class="el" href="MqttConnection_8h.html#a68a4225be34219345b7726c1b99f9355">ssapIndicationCallback</a> *callback, void *callbackContext)</td></tr>
<tr class="memdesc:a17ce378f6dc282c2cad711896a6ce791"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers the indication listener on a MQTT connection.  <a href="#a17ce378f6dc282c2cad711896a6ce791">More...</a><br /></td></tr>
<tr class="separator:a17ce378f6dc282c2cad711896a6ce791"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad809ad24e12c2a6e4a0cac49131c995"><td class="memItemLeft" align="right" valign="top"><a class="el" href="KpMQTT_8h.html#aa6ff17a9f8517d62d635de23e8be85bb">KPMQTTDLL_API</a> <a class="el" href="structmqtt__credentials.html">mqtt_credentials</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="KpMQTT_8h.html#aad809ad24e12c2a6e4a0cac49131c995">KpMqtt_buildCredentials</a> (const char *username, const char *password)</td></tr>
<tr class="memdesc:aad809ad24e12c2a6e4a0cac49131c995"><td class="mdescLeft">&#160;</td><td class="mdescRight">Builds an username and password-based MQTT credentials structure.  <a href="#aad809ad24e12c2a6e4a0cac49131c995">More...</a><br /></td></tr>
<tr class="separator:aad809ad24e12c2a6e4a0cac49131c995"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f56091765fda7c894fd678db659c845"><td class="memItemLeft" align="right" valign="top"><a class="el" href="KpMQTT_8h.html#aa6ff17a9f8517d62d635de23e8be85bb">KPMQTTDLL_API</a> <a class="el" href="structmqtt__credentials.html">mqtt_credentials</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="KpMQTT_8h.html#a4f56091765fda7c894fd678db659c845">buildCredentials</a> (const char *username, const char *password)</td></tr>
<tr class="memdesc:a4f56091765fda7c894fd678db659c845"><td class="mdescLeft">&#160;</td><td class="mdescRight">Builds an username and password-based MQTT credentials structure.  <a href="#a4f56091765fda7c894fd678db659c845">More...</a><br /></td></tr>
<tr class="separator:a4f56091765fda7c894fd678db659c845"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3651864a3ebb2cfeac1a698158ee304b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="KpMQTT_8h.html#aa6ff17a9f8517d62d635de23e8be85bb">KPMQTTDLL_API</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="KpMQTT_8h.html#a3651864a3ebb2cfeac1a698158ee304b">KpMqtt_freeOpenSSLTables</a> ()</td></tr>
<tr class="memdesc:a3651864a3ebb2cfeac1a698158ee304b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees the memory used by the OpenSSL library.  <a href="#a3651864a3ebb2cfeac1a698158ee304b">More...</a><br /></td></tr>
<tr class="separator:a3651864a3ebb2cfeac1a698158ee304b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Functions that handle MQTT connections to the SIB. </p>
<dl class="section author"><dt>Author</dt><dd>Indra Sistemas S.A. </dd>
<dd>
Carlo Gavazzi Automation S.p.A. </dd>
<dd>
Circutor S.A. </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Oct 29 2015 </dd></dl>
<dl class="section version"><dt>Version</dt><dd>4.2 </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a href="http://sofia2.com/desarrollador_en.html">http://sofia2.com/desarrollador_en.html</a></dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright 2013-15 Indra Sistemas S.A.</dd></dl>
<p>Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at </p><pre class="fragment">http://www.apache.org/licenses/LICENSE-2.0
</pre><p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="aa6ff17a9f8517d62d635de23e8be85bb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KPMQTTDLL_API</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a6965bcb0941f3814eb9d1d3981561c9d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NOTIFICATIONS_TOPIC_LENGTH&#160;&#160;&#160;19</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The length of the notifications topic. </p>

</div>
</div>
<a class="anchor" id="ae351369120d97e85678e034c811fdd7f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SEND_TO_SIB_QOS_LEVEL&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The ordinary SSAP QoS level. </p>

</div>
</div>
<a class="anchor" id="a360d0ab6a231f8b150370efae788a24a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SIB_GW_TOPIC&#160;&#160;&#160;&quot;CLIENT_TOPIC&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Topic to use when sending data to the SIB. </p>

</div>
</div>
<a class="anchor" id="a09d5dc870b4b1aba97ffa91496d80240"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SSAP_INDICATIONS_TOPIC&#160;&#160;&#160;&quot;/TOPIC_MQTT_INDICATION&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The topic that the SIB uses to send subscription data. </p>

</div>
</div>
<a class="anchor" id="a74ec19f421cd68625daaacc05f43ba63"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SSAP_RESPONSES_TOPIC&#160;&#160;&#160;&quot;/TOPIC_MQTT_PUBLISH&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The topic that the SIB uses to answer us. </p>

</div>
</div>
<a class="anchor" id="a98fc270f759b8c7fd7eb04b93d64f47a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SUSCRIBE_QOS_LEVEL&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The subscription SSAP messages QoS level. </p>

</div>
</div>
<a class="anchor" id="a2fa4daba3d8a65cb1b1869144a59635a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WATCHDOG_SEND_TIMEOUT&#160;&#160;&#160;5000</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a661aff4ae1eb92e6352acb0173177fc5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WATCHDOG_TOPIC&#160;&#160;&#160;&quot;MQTT_CONN_WATCHDOG&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Topic to be used by the MQTT connection watchdog. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="a94c42ef79c93cb9672927fc1e1be6525"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="KpMQTT_8h.html#a94c42ef79c93cb9672927fc1e1be6525">ConnectionStatus</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>An enum type that describes the outcome of a connection process. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a94c42ef79c93cb9672927fc1e1be6525a7a691a2430ec26878897b5fbc9c22a4c"></a>CONNECTED&#160;</td><td class="fielddoc">
<p>The MQTT connection was established. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a94c42ef79c93cb9672927fc1e1be6525ad686e08986d46bfaca37170fc0a2544d"></a>FAILED_CallbacksNotRegistered&#160;</td><td class="fielddoc">
<p>The SSAP message callback could not be registered. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a94c42ef79c93cb9672927fc1e1be6525a938799b0b8f0238d17df8ec16a405933"></a>FAILED_PhysicalConnection&#160;</td><td class="fielddoc">
<p>The TCP connection with the SIB could not be established. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a94c42ef79c93cb9672927fc1e1be6525a26e00e13227ad12020a966dd81969a79"></a>FAILED_PhysicalConnection_BadCredentials&#160;</td><td class="fielddoc">
<p>The MQTT credentials were not correct. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a94c42ef79c93cb9672927fc1e1be6525ab045ea0666f8f02a9d9cca87445f2d61"></a>FAILED_PhysicalConnection_BadClientID&#160;</td><td class="fielddoc">
<p>The MQTT ClientID was not valid. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a94c42ef79c93cb9672927fc1e1be6525ad6d9d801a27bedf0cf2ddbb260935291"></a>FAILED_SubscriptionToSIBTopic&#160;</td><td class="fielddoc">
<p>The subscriptions to the topics used by the SIB could not be created. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a94c42ef79c93cb9672927fc1e1be6525a1033df232780383892528b1461e091ea"></a>FAILED_InternalError&#160;</td><td class="fielddoc">
<p>An internal API error has occured. </p>
</td></tr>
</table>

</div>
</div>
<a class="anchor" id="a433f6b787a3fe94980a96a34a1cb5a91"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="KpMQTT_8h.html#a433f6b787a3fe94980a96a34a1cb5a91">DisconnectionStatus</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>An enum type that describes the outcome of a disconnection process. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a433f6b787a3fe94980a96a34a1cb5a91acdaad1112073e3e2ea032424c38c34e1"></a>DISCONNECTED&#160;</td><td class="fielddoc">
<p>The connection was closed properly. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a433f6b787a3fe94980a96a34a1cb5a91a1f3eb805d8f8eb224538f9f7e847afa5"></a>FAILED_ClosePhysicalConnection&#160;</td><td class="fielddoc">
<p>The socket could not be closed. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a433f6b787a3fe94980a96a34a1cb5a91a62ddedf7ef2f4e164931b628fa2deadb"></a>FAILED_DisconnectionInternalError&#160;</td><td class="fielddoc">
<p>An internal API error has occured. </p>
</td></tr>
</table>

</div>
</div>
<a class="anchor" id="a2f96fdb6fe6979ec30d76ea5e290be15"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="KpMQTT_8h.html#a2f96fdb6fe6979ec30d76ea5e290be15">SendStatus</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>An enum type that describes the outcome of a message delivery operation. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a2f96fdb6fe6979ec30d76ea5e290be15af29619d9240b20155ab50bc3beb3947b"></a>SENT&#160;</td><td class="fielddoc">
<p>The MQTT message was sent to the SIB. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a2f96fdb6fe6979ec30d76ea5e290be15a2c9c8a390fd84cedcbf0e5a559d17cef"></a>FAILED_SendMessage&#160;</td><td class="fielddoc">
<p>The MQTT message could not be sent to the SIB. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a2f96fdb6fe6979ec30d76ea5e290be15af5b193b0202a842f0c454c4935d7cb26"></a>FAILED_SIBReceptionConfirmation&#160;</td><td class="fielddoc">
<p>The MQTT delivery acknowledge was not received from the SIB. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a4f56091765fda7c894fd678db659c845"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="KpMQTT_8h.html#aa6ff17a9f8517d62d635de23e8be85bb">KPMQTTDLL_API</a> <a class="el" href="structmqtt__credentials.html">mqtt_credentials</a>* buildCredentials </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>username</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>password</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Builds an username and password-based MQTT credentials structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">username</td><td>The MQTT username to use. </td></tr>
    <tr><td class="paramname">password</td><td>The MQTT password to use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A MQTT credentials structure initialized with the given arguments. The arguments will be copied. </dd></dl>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000004">Deprecated:</a></b></dt><dd>Use <a class="el" href="KpMQTT_8h.html#aad809ad24e12c2a6e4a0cac49131c995" title="Builds an username and password-based MQTT credentials structure. ">KpMqtt_buildCredentials()</a> instead. </dd></dl>

</div>
</div>
<a class="anchor" id="aad809ad24e12c2a6e4a0cac49131c995"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="KpMQTT_8h.html#aa6ff17a9f8517d62d635de23e8be85bb">KPMQTTDLL_API</a> <a class="el" href="structmqtt__credentials.html">mqtt_credentials</a>* KpMqtt_buildCredentials </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>username</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>password</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Builds an username and password-based MQTT credentials structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">username</td><td>The MQTT username to use. </td></tr>
    <tr><td class="paramname">password</td><td>The MQTT password to use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A MQTT credentials structure initialized with the given arguments. The arguments will be copied. </dd></dl>

</div>
</div>
<a class="anchor" id="a18499fce3a35bbedcf2eaec7a156cbb5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="KpMQTT_8h.html#aa6ff17a9f8517d62d635de23e8be85bb">KPMQTTDLL_API</a> <a class="el" href="KpMQTT_8h.html#a94c42ef79c93cb9672927fc1e1be6525">ConnectionStatus</a> KpMqtt_connect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmqtt__connection.html">mqtt_connection</a> **&#160;</td>
          <td class="paramname"><em>connection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>server</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Establishes a non-cyphered MQTT connection with the SIB. </p>
<dl class="section note"><dt>Note</dt><dd>If the connection is not established, all allocated the memory and the memory of the arguments will be freed. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">connection</td><td>A configured MQTT connection structure. </td></tr>
    <tr><td class="paramname">server</td><td>The SIB server name </td></tr>
    <tr><td class="paramname">port</td><td>The SIB MQTT port </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ConnectionStatus enum value representing the result of the connection process. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="bulk_8c-example.html#a11">bulk.c</a>, <a class="el" href="config_8c-example.html#a8">config.c</a>, <a class="el" href="deletes_8c-example.html#a10">deletes.c</a>, <a class="el" href="disconnections_8c-example.html#a12">disconnections.c</a>, <a class="el" href="inserts_8c-example.html#a11">inserts.c</a>, <a class="el" href="join-leave_8c-example.html#a9">join-leave.c</a>, <a class="el" href="queries_8c-example.html#a11">queries.c</a>, <a class="el" href="subscribes_8c-example.html#a13">subscribes.c</a>, and <a class="el" href="updates_8c-example.html#a11">updates.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="abd2ed7d8b9dd349488c43dda0d29a598"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="KpMQTT_8h.html#aa6ff17a9f8517d62d635de23e8be85bb">KPMQTTDLL_API</a> <a class="el" href="KpMQTT_8h.html#a94c42ef79c93cb9672927fc1e1be6525">ConnectionStatus</a> KpMqtt_connectd </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>server</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmqtt__credentials.html">mqtt_credentials</a> *&#160;</td>
          <td class="paramname"><em>credentials</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="MqttConnection_8h.html#afcd4418156eb17b79888e3079cb86f11">genericSsapCallback</a> *&#160;</td>
          <td class="paramname"><em>messageReceivedCallback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>callbackContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>connectionEventsCallback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>connectionEventsContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmqtt__connection.html">mqtt_connection</a> **&#160;</td>
          <td class="paramname"><em>created_connection</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Establishes a non-cyphered MQTT connection with the SIB. </p>
<dl class="section note"><dt>Note</dt><dd>If the connection is not established, all allocated the memory and the memory of the arguments will be freed. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server</td><td>The SIB server name </td></tr>
    <tr><td class="paramname">port</td><td>The SIB MQTT port </td></tr>
    <tr><td class="paramname">credentials</td><td>The MQTT credentials to use. This pointer must be setted to NULL when no authentication credentials will be used, and its memory will be freed from the API. </td></tr>
    <tr><td class="paramname">messageReceivedCallback</td><td>A pointer to the function that will process all the incoming SSAP messages (except the INDICATION ones) </td></tr>
    <tr><td class="paramname">callbackContext</td><td>A pointer to the context (a.k.a. "state") structure used by the messageReceivedCallback function. </td></tr>
    <tr><td class="paramname">connectionEventsCallback</td><td>A pointer to the function that will process the MQTT connection events. So far, only disconnection events are detected. </td></tr>
    <tr><td class="paramname">connectionEventsContext</td><td>A pointer to the context (a.k.a. "state") structure used by the connectionEventsCallback function. </td></tr>
    <tr><td class="paramname">created_connection</td><td>A pointer to an structure that stores the MQTT connection state, passed by reference. When no connection has been established, it will be setted to NULL. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ConnectionStatus enum value representing the result of the connection process. </dd></dl>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000001">Deprecated:</a></b></dt><dd>Use <a class="el" href="KpMQTT_8h.html#a18499fce3a35bbedcf2eaec7a156cbb5" title="Establishes a non-cyphered MQTT connection with the SIB. ">KpMqtt_connect()</a> instead. </dd></dl>

</div>
</div>
<a class="anchor" id="a79013f9a33ade5fd6c743293ca06169d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="KpMQTT_8h.html#aa6ff17a9f8517d62d635de23e8be85bb">KPMQTTDLL_API</a> <a class="el" href="KpMQTT_8h.html#a94c42ef79c93cb9672927fc1e1be6525">ConnectionStatus</a> KpMqtt_connectSSL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmqtt__connection.html">mqtt_connection</a> **&#160;</td>
          <td class="paramname"><em>connection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>server</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>ca_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>ca_path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Establishes a MQTT over SSL connection with the SIB. </p>
<dl class="section note"><dt>Note</dt><dd>If the connection is not established, all allocated the memory and the memory of the arguments will be freed. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">connection</td><td>A configured MQTT connection structure. </td></tr>
    <tr><td class="paramname">server</td><td>The SIB server name </td></tr>
    <tr><td class="paramname">port</td><td>The SIB MQTT port </td></tr>
    <tr><td class="paramname">ca_file</td><td>The trusted PEM certificate. <b>It must be a root certificate.</b> </td></tr>
    <tr><td class="paramname">ca_path</td><td>The directory that contains the trusted PEM certificates (usually, /etc/ssl/certs). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>You must pass either the ca_file or the ca_path parameter to this function. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>A ConnectionStatus enum value representing the result of the connection process. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="join-leave-ssl_8c-example.html#a9">join-leave-ssl.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a8fc08652368728e37dea7a59dc8f4d8b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="KpMQTT_8h.html#aa6ff17a9f8517d62d635de23e8be85bb">KPMQTTDLL_API</a> <a class="el" href="KpMQTT_8h.html#a94c42ef79c93cb9672927fc1e1be6525">ConnectionStatus</a> KpMqtt_connectSSLd </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>server</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmqtt__credentials.html">mqtt_credentials</a> *&#160;</td>
          <td class="paramname"><em>credentials</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>ca_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>ca_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="MqttConnection_8h.html#afcd4418156eb17b79888e3079cb86f11">genericSsapCallback</a> *&#160;</td>
          <td class="paramname"><em>messageReceivedCallback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>callbackContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>connectionEventsCallback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>connectionEventsContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmqtt__connection.html">mqtt_connection</a> **&#160;</td>
          <td class="paramname"><em>created_connection</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Establishes a MQTT over SSL connection with the SIB. </p>
<dl class="section note"><dt>Note</dt><dd>If the connection is not established, all allocated the memory and the memory of the arguments will be freed. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server</td><td>The SIB server name </td></tr>
    <tr><td class="paramname">port</td><td>The SIB MQTT port </td></tr>
    <tr><td class="paramname">credentials</td><td>The MQTT credentials to use. This pointer must be setted to NULL when no authentication credentials will be used, and its memory will be freed from the API. </td></tr>
    <tr><td class="paramname">ca_file</td><td>The trusted PEM certificate. <b>It must be a root certificate.</b> </td></tr>
    <tr><td class="paramname">ca_path</td><td>The directory that contains the trusted PEM certificates (usually, /etc/ssl/certs). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>You must pass either the ca_file or the ca_path parameter to this function. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">messageReceivedCallback</td><td>A pointer to the function that will process all the incoming SSAP messages (except the INDICATION ones) </td></tr>
    <tr><td class="paramname">callbackContext</td><td>A pointer to the context (a.k.a. "state") structure used by the messageReceivedCallback function. </td></tr>
    <tr><td class="paramname">connectionEventsCallback</td><td>A pointer to the function that will process the MQTT connection events. So far, only disconnection events are detected. </td></tr>
    <tr><td class="paramname">connectionEventsContext</td><td>A pointer to the context (a.k.a. "state") structure used by the connectionEventsCallback function. </td></tr>
    <tr><td class="paramname">created_connection</td><td>A pointer to an structure that stores the MQTT connection state, passed by reference. When no connection has been established, it will be setted to NULL. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ConnectionStatus enum value representing the result of the connection process. </dd></dl>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000002">Deprecated:</a></b></dt><dd>Use <a class="el" href="KpMQTT_8h.html#a79013f9a33ade5fd6c743293ca06169d" title="Establishes a MQTT over SSL connection with the SIB. ">KpMqtt_connectSSL()</a> instead. </dd></dl>

</div>
</div>
<a class="anchor" id="ad1f21f13ce9c17d41d47f3ed3a57a5eb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="KpMQTT_8h.html#aa6ff17a9f8517d62d635de23e8be85bb">KPMQTTDLL_API</a> <a class="el" href="KpMQTT_8h.html#a433f6b787a3fe94980a96a34a1cb5a91">DisconnectionStatus</a> KpMqtt_disconnect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmqtt__connection.html">mqtt_connection</a> *&#160;</td>
          <td class="paramname"><em>connection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes an MQTT connection with the SIB. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">connection</td><td>A pointer to the status structure of the connection. </td></tr>
    <tr><td class="paramname">timeout</td><td>A timeout to close the connection in milliseconds. If the timeout elapses, the connection will be closed abruply. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A DisconnectionStatus enum value representing the result of the disconnection process. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="bulk_8c-example.html#a24">bulk.c</a>, <a class="el" href="config_8c-example.html#a13">config.c</a>, <a class="el" href="deletes_8c-example.html#a19">deletes.c</a>, <a class="el" href="disconnections_8c-example.html#a17">disconnections.c</a>, <a class="el" href="inserts_8c-example.html#a20">inserts.c</a>, <a class="el" href="join-leave-ssl_8c-example.html#a15">join-leave-ssl.c</a>, <a class="el" href="join-leave_8c-example.html#a15">join-leave.c</a>, <a class="el" href="queries_8c-example.html#a25">queries.c</a>, <a class="el" href="subscribes_8c-example.html#a23">subscribes.c</a>, and <a class="el" href="updates_8c-example.html#a20">updates.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a3651864a3ebb2cfeac1a698158ee304b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="KpMQTT_8h.html#aa6ff17a9f8517d62d635de23e8be85bb">KPMQTTDLL_API</a> void KpMqtt_freeOpenSSLTables </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees the memory used by the OpenSSL library. </p>
<dl class="section note"><dt>Note</dt><dd>This function is not thread safe. Call it before exiting from the main thread. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="bulk_8c-example.html#a26">bulk.c</a>, <a class="el" href="config_8c-example.html#a14">config.c</a>, <a class="el" href="deletes_8c-example.html#a21">deletes.c</a>, <a class="el" href="disconnections_8c-example.html#a19">disconnections.c</a>, <a class="el" href="inserts_8c-example.html#a22">inserts.c</a>, <a class="el" href="join-leave-ssl_8c-example.html#a17">join-leave-ssl.c</a>, <a class="el" href="join-leave_8c-example.html#a17">join-leave.c</a>, <a class="el" href="queries_8c-example.html#a27">queries.c</a>, <a class="el" href="subscribes_8c-example.html#a25">subscribes.c</a>, and <a class="el" href="updates_8c-example.html#a22">updates.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="af5535969acf249144246152a88fc55e2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="KpMQTT_8h.html#aa6ff17a9f8517d62d635de23e8be85bb">KPMQTTDLL_API</a> <a class="el" href="KpMQTT_8h.html#a2f96fdb6fe6979ec30d76ea5e290be15">SendStatus</a> KpMqtt_send </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmqtt__connection.html">mqtt_connection</a> *&#160;</td>
          <td class="paramname"><em>connection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structssap__message.html">ssap_message</a> *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends a SSAP message to the SIB. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">connection</td><td>A pointer to the status structure of the connection. </td></tr>
    <tr><td class="paramname">request</td><td>A pointer to the SSAP message to send. Its memory will be freed after sending the message. </td></tr>
    <tr><td class="paramname">timeout</td><td>The timeout to send the message to the SIB in milliseconds. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A SendStatus enum value representing the status of the send operation. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="bulk_8c-example.html#a14">bulk.c</a>, <a class="el" href="config_8c-example.html#a11">config.c</a>, <a class="el" href="deletes_8c-example.html#a13">deletes.c</a>, <a class="el" href="disconnections_8c-example.html#a15">disconnections.c</a>, <a class="el" href="inserts_8c-example.html#a14">inserts.c</a>, <a class="el" href="join-leave-ssl_8c-example.html#a12">join-leave-ssl.c</a>, <a class="el" href="join-leave_8c-example.html#a12">join-leave.c</a>, <a class="el" href="queries_8c-example.html#a14">queries.c</a>, <a class="el" href="subscribes_8c-example.html#a16">subscribes.c</a>, and <a class="el" href="updates_8c-example.html#a14">updates.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a998718f3bde4ed2f6ba64c73c97e93ba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="KpMQTT_8h.html#aa6ff17a9f8517d62d635de23e8be85bb">KPMQTTDLL_API</a> void KpMqtt_setIndicationListener </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmqtt__connection.html">mqtt_connection</a> *&#160;</td>
          <td class="paramname"><em>connection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="MqttConnection_8h.html#a68a4225be34219345b7726c1b99f9355">ssapIndicationCallback</a> *&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>callbackContext</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Registers the indication listener on a MQTT connection. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">connection</td><td>A pointer to the status structure of the connection. </td></tr>
    <tr><td class="paramname">callback</td><td>A pointer to the SSAP indication callback function. </td></tr>
    <tr><td class="paramname">callbackContext</td><td>A pointer to the context (a.k.a. "state") structure used by the ssapIndicationCallback function. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a17ce378f6dc282c2cad711896a6ce791"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="KpMQTT_8h.html#aa6ff17a9f8517d62d635de23e8be85bb">KPMQTTDLL_API</a> void setIndicationListener </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmqtt__connection.html">mqtt_connection</a> *&#160;</td>
          <td class="paramname"><em>connection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="MqttConnection_8h.html#a68a4225be34219345b7726c1b99f9355">ssapIndicationCallback</a> *&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>callbackContext</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Registers the indication listener on a MQTT connection. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">connection</td><td>A pointer to the status structure of the connection. </td></tr>
    <tr><td class="paramname">callback</td><td>A pointer to the SSAP indication callback function. </td></tr>
    <tr><td class="paramname">callbackContext</td><td>A pointer to the context (a.k.a. "state") structure used by the ssapIndicationCallback function. </td></tr>
  </table>
  </dd>
</dl>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000003">Deprecated:</a></b></dt><dd>Use <a class="el" href="KpMQTT_8h.html#a998718f3bde4ed2f6ba64c73c97e93ba" title="Registers the indication listener on a MQTT connection. ">KpMqtt_setIndicationListener()</a> instead. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="subscribes_8c-example.html#a19">subscribes.c</a>.</dd>
</dl>
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_ebaa9c422e2faa7d2f93e66b1a6315cd.html">ssap</a></li><li class="navelem"><a class="el" href="KpMQTT_8h.html">KpMQTT.h</a></li>
    <li class="footer">Generated on Thu Oct 29 2015 12:53:18 for SSAP API, C Implementation by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.7 </li>
  </ul>
</div>
</body>
</html>
